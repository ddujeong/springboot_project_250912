<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" layout:decorate="~{layout}">
    <!-- 페이지 내용 -->
    <div class="container" layout:fragment="content">
        <h1>오시는 길</h1>
        <div id="map" style="width:100%; height:400px;"></div>
    </div>

    <!-- 페이지 스크립트 -->
    <script type="text/javascript" layout:fragment="script"
            src="//dapi.kakao.com/v2/maps/sdk.js?appkey=982f4155446da3a3024b8cfac00d35cc&libraries=services">
    </script>

    <script layout:fragment="script">
        window.onload = function() {
            var container = document.getElementById('map');
            var options = {
                center: new kakao.maps.LatLng(37.556424302, 126.945206801),
                level: 3
            };
            var map = new kakao.maps.Map(container, options);

            var geocoder = new kakao.maps.services.Geocoder();
            var address = "서울특별시 서대문구 신촌역로 30";

            geocoder.addressSearch(address, function(result, status) {
                if (status === kakao.maps.services.Status.OK) {
                    var coords = new kakao.maps.LatLng(result[0].y, result[0].x);
                    map.setCenter(coords);

                    var marker = new kakao.maps.Marker({
                        map: map,
                        position: coords
                    });

                    var infowindow = new kakao.maps.InfoWindow({
                        content: '<div style="padding:5px;">' + address + '</div>'
                    });
                    infowindow.open(map, marker);

                    console.log("위도: " + result[0].y + ", 경도: " + result[0].x);
                } else {
                    alert("주소 검색 실패: " + status);
                }
            });
        };
    </script>
</html>
